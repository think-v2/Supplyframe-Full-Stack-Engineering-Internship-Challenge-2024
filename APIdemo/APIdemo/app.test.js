const packagePlayer = require('./app');

test('format player Tenz\'s raw data into usable data', () => {
    let rawTeam = `<div class="template-box" style="padding-right:2em;"><table class="wikitable collapsible collapsed" style="width:400px"><tbody><tr><th colspan="3" style="text-align:left"><span data-highlightingclass="Sentinels" class="team-template-team-standard"><span class="team-template-image-icon"><a href="/valorant/Sentinels" title="Sentinels"><img alt="Sentinels" src="/commons/images/thumb/1/13/Sentinels_2020_allmode.png/50px-Sentinels_2020_allmode.png" decoding="async" width="50" height="50" srcset="/commons/images/thumb/1/13/Sentinels_2020_allmode.png/75px-Sentinels_2020_allmode.png 1.5x, /commons/images/thumb/1/13/Sentinels_2020_allmode.png/100px-Sentinels_2020_allmode.png 2x" /></a></span> <span class="team-template-text"><a href="/valorant/Sentinels" title="Sentinels">Sentinels</a></span></span></th></tr><tr><th>ID</th><th>Real name</th><th>Role</th></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:United_States" title="United States"><img alt="United States" src="/commons/images/thumb/3/3b/Us_hd.png/36px-Us_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/3/3b/Us_hd.png/54px-Us_hd.png 1.5x, /commons/images/thumb/3/3b/Us_hd.png/72px-Us_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/Curry" title="Curry">curry</a></span></td><td>Rahul Nemani</td><td>Substitute</td></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:Morocco" title="Morocco"><img alt="Morocco" src="/commons/images/thumb/8/81/Ma_hd.png/36px-Ma_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/8/81/Ma_hd.png/54px-Ma_hd.png 1.5x, /commons/images/thumb/8/81/Ma_hd.png/72px-Ma_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/Johnqt" title="Johnqt">johnqt</a></span></td><td>Mohamed Amine Ouarid</td><td></td></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:Brazil" title="Brazil"><img alt="Brazil" src="/commons/images/thumb/a/a9/Br_hd.png/36px-Br_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/a/a9/Br_hd.png/54px-Br_hd.png 1.5x, /commons/images/thumb/a/a9/Br_hd.png/72px-Br_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/Sacy" title="Sacy">Sacy</a></span></td><td>Gustavo Henrique Rossi da Silva</td><td></td></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:Canada" title="Canada"><img alt="Canada" src="/commons/images/thumb/7/72/Ca_hd.png/36px-Ca_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/7/72/Ca_hd.png/54px-Ca_hd.png 1.5x, /commons/images/thumb/7/72/Ca_hd.png/72px-Ca_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/TenZ" title="TenZ">TenZ</a></span></td><td>Tyson Van Ngo</td><td></td></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:United_States" title="United States"><img alt="United States" src="/commons/images/thumb/3/3b/Us_hd.png/36px-Us_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/3/3b/Us_hd.png/54px-Us_hd.png 1.5x, /commons/images/thumb/3/3b/Us_hd.png/72px-Us_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/Zekken" title="Zekken">zekken</a></span></td><td>Zachary Jude Patrone</td><td></td></tr><tr><td style="font-weight:bold"><span class="flag"><a href="/valorant/Category:United_States" title="United States"><img alt="United States" src="/commons/images/thumb/3/3b/Us_hd.png/36px-Us_hd.png" decoding="async" width="36" height="24" srcset="/commons/images/thumb/3/3b/Us_hd.png/54px-Us_hd.png 1.5x, /commons/images/thumb/3/3b/Us_hd.png/72px-Us_hd.png 2x" /></a></span>&#160;<span style="white-space:pre"><a href="/valorant/Zellsis" title="Zellsis">Zellsis</a></span></td><td>Jordan Montemurro</td><td></td></tr></tbody></table></div>`;
    let startingIndexPlayer = 2414;
    let endingIndexPlayer = 2869;
    let players = [];
    packagePlayer(rawTeam, startingIndexPlayer, endingIndexPlayer, players);

    // make sure each part of the player is assigned correctly (id is tested by being what we are searching by)
    expect(players.find(player => player.id === "TenZ").flag).toBe("Ca");
    expect(players.find(player => player.id === "TenZ").country).toBe("Canada");
    expect(players.find(player => player.id === "TenZ").name).toBe("Tyson Van Ngo");
    expect(players.find(player => player.id === "TenZ").sub).toBe(false);
});